# .envrc - Environment configuration for the project

# --- Check if the virtual environment exists ---
if [ ! -d ".venv" ]; then
  echo "❌ Virtual environment .venv does not exist. Creating..."
  uv venv .venv
else
  echo "✔️ Using existing virtual environment."
fi

# --- Activate the virtual environment using direnv's layout ---
# This correctly sets VIRTUAL_ENV to the absolute path
export VIRTUAL_ENV="$PWD/.venv"
PATH_add "$VIRTUAL_ENV/bin"

# --- Set environment variables ---
export PROJECT_HOME=$(pwd)

# --- Load environment variables from .env file ---
if [ -f .env ]; then
  echo "✔️ Loading environment variables from .env..."
  set -a
  source .env
  set +a
else
  echo "⚠️ No .env file found. Skipping environment variable loading."
fi

# --- Custom commands or setup ---
echo "✔️ Environment setup complete. You are now in the project environment."
